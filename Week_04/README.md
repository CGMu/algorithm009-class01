# 学习笔记
** 动态规划     


## 运筹学中的动态规划     

动态规划(Dynamic Programming，简称DP)是运筹学的一个分支，它是解决多阶段决策过程最优化的一种数学方法。把多阶段问题变换为一系列相互联系的的单阶段问题，然后逐个加以解决。这里提到动态规划其实是一种数学方法，是求解某类问题的一种方法，而不是一种特殊的算法，没有一个标准的数学表达式或明确定义的一种规则。比如我们接触过的”排序算法“，”二叉树遍历算法“等，这些算法都是有固定范式的，遇到此类问题我们只需要照搬算法即可。但动态规划却不是，它告诉你的是解决某类问题的一种思路，或者是一种更高意义上的算法，是一种道，而不是术。所以动态规划难就难在我们即使学会了这种思想，遇到具体问题也需要具体分析，很可能因为我们构造不出动态规划所需要的形式而无法解决，甚至根本想不到这是一个动态规划问题。如下图。我们在解决某些最优问题时，可将解决问题的过程按照一定次序分为若干个互相联系的阶段（1, 2, ..., N），从而将一个大问题化成一系列子问题，然后逐个求解。           

多阶段决策过程在每一个阶段都需要作出决策，从而使整个过程达到最优。各个阶段决策的选取仅依赖当前状态（这里的当前状态指的是当前阶段的输入状态），从而确定输出状态。当各个阶段决策确定后，就组成了一个决策序列，这个决策序列就决定了问题的最终解决方案。这种把一个问题可看作是一个前后关联具有链状结构的多阶段过程就称为多阶段决策过程。前面说到”仅需要依赖当前状态“，指的是问题的历史状态不影响未来的发展，只能通过当前的状态去影响未来，当前的状态是以往历史的一个总结。这个性质称为无后效性(即马尔科夫性)。    
 动态规划定义中提到按照一定次序分成互相联系的子阶段，这里面的关键是互相联系。如果是独立的子问题，那是分治法，分而治之的意思。动态规划将一个大问题化成一族互相联系、同类型的子问题。既然是同类型，我们在逐个解决子问题的时候，就可以利用相同的决策，从而更容易的解决问题。互相联系利用前面已经解决的子问题的最优化结果来依次进行计算接下来的子问题，当最后一个子问题得到最优解时，就是整个问题的最优解。这里面包括两个关键点： 每一个阶段可能包括很多状态，前后阶段的状态通过决策联系在一起。如果要利用前阶段子问题的结果解决现阶段的子问题，必须要能够建立前后阶段状态的转移关系，最好可以通过方程表示。用专业术语我们又叫做”状态转移方程“。我们在衡量最优解的时候需要有一个指标函数，最优解就是让这个指标函数达到最优值，比如最大或者最小。如果我们可以将问题拆分成子问题，那么这个指标函数也必须具有分离性，也就是必须能够利用子问题的最优递推的求出整体最优。当整体最优求解出以后，就可以知道各个子问题的最优解。可以看到，上面两个关键点无论是状态转移方程还是指标函数分离，其实都是需要列出递推关系式，如果恰当的选取状态，让每个子问题的状态能够表示出子问题的最优解，那我们就可以用状态转移方程递推求出指标函数的最优解。实际中我们也是经常这么做的。


##《算法导论》中的动态规划     

动态规划的思想最初是由美国数学家贝尔曼在1951提出，前面我们也是从数学的角度去理解动态规划，它背后的思想是最优化定理。在《算法导论》中也讲到了”动态规划“，我在前面提到，动态规划难就难在它不是一成不变的，是一种更高意义上的算法思想；它不是一种特殊的招式，而是无招胜有招，需要见招拆招。从算法的角度来看，什么时候可以使用动态规范方法解决问题呢？这其中包括了两个要素，分别是”重叠子结构“和”最优子结构“。下面我们就借鉴《算法导论》，从算法的维度再来剖析一遍动态规划，看看和运筹学中的”动态规划“能不能找到什么共性？

<p>  
1）重叠子结构前面我们说动态规划是将一个多阶段问题分成几个相互联系的单阶段问题。而这几个相互联系的单阶段问题一定要是一族同类型的子问题，这样分成多阶段决策才是有意义的，否则我们每次面对的决策都是不同的问题，也就失去了分成单阶段的意义。在算法上，我们把这种同类型的子问题又叫做”重叠子结构“。重叠不是相同，而是同类型，我们必须得利用前面子结构计算出的结果，用递推不断地调用同一个问题。所以说，《算法导论》中的重叠子结构其实就是对应了数学中将多阶段问题分成单阶段问题的过程，只不过强调了这个单阶段问题必须是”重叠的“，这样才能够用同一种算法递推地解决问题。        

2）最优子结构利用前面已经解决的子问题最优解来构造并解决后面的子问题。能够构造的前提就是要满足指标函数的分离性，也就是全局最优解一定能够拆成子问题的最优解，从而递推解决。对应到算法中，就是按照自底向上的策略，首先找到子问题的最优解，解决子问题，然后逐步向上找到问题的一个最优解。也就是说，整体问题的最优解包括了子问题的最优解。我们又叫做”最优子结构“。这么分析来，《算法导论》中的最优子结构其实就是对应了数学中指标函数的分离性。         

两者只是从不同的维度描述而已。所以动态规划在数学上和算法上的描述归根到底都是相同的，只是使用数学语言和算法语言的区别。